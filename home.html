<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>í™ˆ - Tweedule</title>
    <link href="https://fonts.googleapis.com/css2?family=Gamja+Flower&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="home-container">
        <header class="home-header">
            <div class="header-left">
                <h1 class="home-title">ğŸ“… Tweedule</h1>
            </div>
            <div class="header-right">
                <div id="weatherWidget" class="weather-widget">
                    <span id="weatherIcon">ğŸŒ¤ï¸</span>
                    <span id="weatherTemp">--Â°C</span>
                    <span id="weatherCity">ìœ„ì¹˜ ì„¤ì •</span>
                </div>
                <button id="darkModeToggleHome" class="btn-dark-mode">ğŸŒ™</button>
                <button id="logoutBtnHome" class="btn-logout">ë¡œê·¸ì•„ì›ƒ</button>
            </div>
        </header>
        
        <main class="home-main">
            <h2 class="home-subtitle">ì˜¤ëŠ˜ë„ ì¢‹ì€ í•˜ë£¨ ë˜ì„¸ìš”! âœ¨</h2>
            
            <div class="menu-grid">
                <div class="menu-card" data-view="day">
                    <div class="menu-icon">ğŸ“†</div>
                    <h3>ì¼ê°„ ì¼ì •</h3>
                    <p>ì˜¤ëŠ˜ì˜ ì¼ì •ì„ í™•ì¸í•˜ì„¸ìš”</p>
                </div>
                
                <div class="menu-card" data-view="week">
                    <div class="menu-icon">ğŸ“…</div>
                    <h3>ì£¼ê°„ ì¼ì •</h3>
                    <p>ì´ë²ˆ ì£¼ë¥¼ í•œëˆˆì—</p>
                </div>
                
                <div class="menu-card" data-view="month">
                    <div class="menu-icon">ğŸ—“ï¸</div>
                    <h3>ì›”ê°„ ì¼ì •</h3>
                    <p>í•œ ë‹¬ ì „ì²´ ë³´ê¸°</p>
                </div>
                
                <div class="menu-card" data-view="year">
                    <div class="menu-icon">ğŸ“Š</div>
                    <h3>ì—°ê°„ ê³„íš</h3>
                    <p>1ë…„ ëª©í‘œ ê´€ë¦¬</p>
                </div>
                
                <div class="menu-card" data-view="monthGoal">
                    <div class="menu-icon">ğŸ¯</div>
                    <h3>ì›”ê°„ ëª©í‘œ</h3>
                    <p>ì´ë²ˆ ë‹¬ ëª©í‘œ ë‹¬ì„±</p>
                </div>
                
                <div class="menu-card" data-view="stats">
                    <div class="menu-icon">ğŸ“ˆ</div>
                    <h3>í†µê³„</h3>
                    <p>ë‚˜ì˜ ì„±ì·¨ë„ í™•ì¸</p>
                </div>
                
                <div class="menu-card" data-view="todo">
                    <div class="menu-icon">âœ…</div>
                    <h3>í•  ì¼</h3>
                    <p>í•  ì¼ ê´€ë¦¬</p>
                </div>
                
                <div class="menu-card" data-view="memo">
                    <div class="menu-icon">ğŸ“</div>
                    <h3>ë©”ëª¨</h3>
                    <p>ìƒê°ì„ ê¸°ë¡í•˜ì„¸ìš”</p>
                </div>
                
                <div class="menu-card" data-view="diary">
                    <div class="menu-icon">ğŸ“–</div>
                    <h3>ì¼ê¸°</h3>
                    <p>í•˜ë£¨ë¥¼ ëŒì•„ë³´ê¸°</p>
                </div>
                
                <div class="menu-card" data-view="timecapsule">
                    <div class="menu-icon">ğŸ</div>
                    <h3>íƒ€ì„ìº¡ìŠ</h3>
                    <p>ë¯¸ë˜ì˜ ë‚˜ì—ê²Œ</p>
                </div>
                
                <div class="menu-card" data-view="dday">
                    <div class="menu-icon">â°</div>
                    <h3>D-Day</h3>
                    <p>ì¤‘ìš”í•œ ë‚  ì¹´ìš´í„°</p>
                </div>
                
                <div class="menu-card" data-view="clock">
                    <div class="menu-icon">ğŸ•</div>
                    <h3>ì‹œê³„</h3>
                    <p>íƒ€ì´ë¨¸Â·ì•ŒëŒÂ·ìŠ¤í†±ì›Œì¹˜</p>
                </div>
                
                <div class="menu-card" data-view="fortune">
                    <div class="menu-icon">ğŸ¥ </div>
                    <h3>í¬ì¶˜ì¿ í‚¤</h3>
                    <p>ì˜¤ëŠ˜ì˜ í–‰ìš´ ë©”ì‹œì§€</p>
                </div>
                
                <div class="menu-card" data-view="meditation">
                    <div class="menu-icon">ğŸ§˜</div>
                    <h3>ëª…ìƒ</h3>
                    <p>ë§ˆìŒì˜ í‰í™” ì°¾ê¸°</p>
                </div>
                
                <div class="menu-card" data-view="category">
                    <div class="menu-icon">ğŸ·ï¸</div>
                    <h3>ì¹´í…Œê³ ë¦¬</h3>
                    <p>ë¶„ë¥˜ ê´€ë¦¬</p>
                </div>
            </div>
        </main>
        
        <footer class="home-footer">
            <p>Â© 2026 Tweedule | Made by Crsytal_K</p>
        </footer>
    </div>
    
    <div id="locationModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>ìœ„ì¹˜ ì„¤ì •</h3>
                <button class="modal-close" onclick="closeLocationModal()">âœ•</button>
            </div>
            <div class="form-group">
                <label>ë„ì‹œ ì´ë¦„ (ì˜ì–´ë¡œ ì…ë ¥)</label>
                <input type="text" id="locationInput" placeholder="ì˜ˆ: Seoul, Busan, New York">
                <p class="input-hint">ì •í™•í•œ ë‚ ì”¨ ì •ë³´ë¥¼ ìœ„í•´ ì˜ì–´ë¡œ ì…ë ¥í•´ì£¼ì„¸ìš”</p>
            </div>
            <div class="modal-buttons">
                <button id="saveLocationBtn" class="btn-primary">ì €ì¥</button>
                <button onclick="closeLocationModal()" class="btn-secondary">ì·¨ì†Œ</button>
            </div>
        </div>
    </div>
    
    <script src="script.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const userStr = localStorage.getItem('currentUser');
            if (!userStr) {
                window.location.href = 'login.html';
                return;
            }
            
            const isDarkMode = localStorage.getItem('darkMode') === 'true';
            if (isDarkMode) {
                document.body.classList.add('dark-mode');
                document.getElementById('darkModeToggleHome').textContent = 'â˜€ï¸';
            }
            
            document.getElementById('darkModeToggleHome')?.addEventListener('click', () => {
                document.body.classList.toggle('dark-mode');
                const isDark = document.body.classList.contains('dark-mode');
                localStorage.setItem('darkMode', isDark);
                document.getElementById('darkModeToggleHome').textContent = isDark ? 'â˜€ï¸' : 'ğŸŒ™';
            });
            
            document.getElementById('logoutBtnHome')?.addEventListener('click', () => {
                if (confirm('ë¡œê·¸ì•„ì›ƒ í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                    localStorage.removeItem('currentUser');
                    window.location.href = 'login.html';
                }
            });
            
            document.querySelectorAll('.menu-card').forEach(card => {
                card.addEventListener('click', () => {
                    const view = card.dataset.view;
                    localStorage.setItem('initialView', view);
                    window.location.href = 'index.html';
                });
            });
            
            document.getElementById('weatherWidget')?.addEventListener('click', () => {
                document.getElementById('locationModal').classList.add('active');
            });
            
            document.getElementById('saveLocationBtn')?.addEventListener('click', () => {
                const location = document.getElementById('locationInput').value.trim();
                if (location) {
                    localStorage.setItem('userLocation', location);
                    loadWeather(location);
                    closeLocationModal();
                } else {
                    alert('ë„ì‹œ ì´ë¦„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                }
            });
            
            const savedLocation = localStorage.getItem('userLocation');
            if (savedLocation) {
                loadWeather(savedLocation);
            } else {
                loadWeather('Seoul');
                localStorage.setItem('userLocation', 'Seoul');
            }
        });
        
        function closeLocationModal() {
            document.getElementById('locationModal').classList.remove('active');
        }
        
        async function loadWeather(city) {
            const WEATHER_API_KEY = 'c01f96b11e477edacb227561dd8d8144'; // ğŸ”¥ ì‹¤ì œ API Key ì…ë ¥!
            
            if (WEATHER_API_KEY.length !== 32) {
                console.error('API Key ê¸¸ì´ê°€ ì´ìƒí•©ë‹ˆë‹¤.');
                return;
            }
            
            const apiUrl = `https://api.openweathermap.org/data/2.5/weather?q=${city}&appid=${WEATHER_API_KEY}&units=metric&lang=kr`;
            
            try {
                const response = await fetch(apiUrl);
                
                if (!response.ok) {
                    if (response.status === 401) {
                        alert('ë‚ ì”¨ API Keyê°€ ìœ íš¨í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.');
                    }
                    return;
                }
                
                const data = await response.json();
                
                if (data.cod === 200) {
                    const temp = Math.round(data.main.temp);
                    const weather = data.weather[0].main;
                    
                    let icon = 'ğŸŒ¤ï¸';
                    if (weather.includes('Rain')) icon = 'ğŸŒ§ï¸';
                    else if (weather.includes('Cloud')) icon = 'â˜ï¸';
                    else if (weather.includes('Clear')) icon = 'â˜€ï¸';
                    else if (weather.includes('Snow')) icon = 'â„ï¸';
                    else if (weather.includes('Thunder')) icon = 'â›ˆï¸';
                    
                    document.getElementById('weatherIcon').textContent = icon;
                    document.getElementById('weatherTemp').textContent = `${temp}Â°C`;
                    document.getElementById('weatherCity').textContent = city;
                }
            } catch (error) {
                console.error('ë‚ ì”¨ ë¡œë“œ ì˜¤ë¥˜:', error);
            }
        }
    </script>
</body>
</html>